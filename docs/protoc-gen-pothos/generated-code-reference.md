# Generated Code Reference

Detailed reference for the TypeScript code generated by protoc-gen-pothos.

## Runtime-Specific References

For detailed documentation specific to each protobuf runtime:

- **[ts-proto](./generated-code-reference-ts-proto.md)** - Complete reference for ts-proto runtime
- **[protobuf-es](./generated-code-reference-protobuf-es.md)** - Complete reference for protobuf-es runtime

## File Structure

For each `.proto` file, the plugin generates a `.pb.pothos.ts` file containing:

```
proto/example/user.proto
    â†“
src/__generated__/example/user.pb.pothos.ts
```

Each generated file includes:
1. Import statements
2. Object type definitions (`$Ref`)
3. Input type definitions (`$Shape`, `$Ref`)
4. Enum type definitions
5. Union type definitions (for oneofs)
6. Helper functions (protobuf-es only: `$toProto`)

## Naming Conventions

### Export Identifiers

| Proto Definition | Generated Export | Type |
|------------------|------------------|------|
| `message User` | `User$Ref` | `ObjectRef<User>` |
| `message User` (input) | `UserInput$Shape` | Type alias |
| `message User` (input) | `UserInput$Ref` | `InputObjectRef<UserInput$Shape>` |
| `message User` (partial) | `UserPartialInput$Shape` | Type alias |
| `message User` (partial) | `UserPartialInput$Ref` | `InputObjectRef<...>` |
| `enum Role` | `Role$Ref` | `EnumRef<Role, Role>` |
| `oneof content` in `Media` | `MediaContent$Ref` | Union type |
| `message User` (protobuf-es) | `UserInput$toProto` | Function |

### Nested Messages

Nested messages use underscore-separated naming:

```protobuf
message User {
  message Address {
    string city = 1;
  }
}
```

Generated exports:
- `UserAddress$Ref`
- `UserAddressInput$Shape`
- `UserAddressInput$Ref`

## Generated Types Overview

### Object Types

Messages generate Pothos object types with:
- `$Ref` export for the object reference
- Field definitions using `t.expose()` or `t.field()`
- `isTypeOf` implementation for union type resolution
- `extensions` object for protobuf metadata

### Input Types

Messages generate input object types with:
- `$Shape` type alias for the input shape
- `$Ref` export for the input reference
- `$toProto` function (protobuf-es only) for conversion

### Enum Types

Enums generate GraphQL enum types with:
- UNSPECIFIED values excluded from GraphQL
- Deprecated values marked with `deprecationReason`
- Ignored values handled via resolver errors

### Union Types (Oneofs)

Oneofs generate GraphQL union types with:
- Member types from oneof fields
- Field resolvers to access the active member
- Squashed unions for wrapper messages

## Key Differences Between Runtimes

| Feature | ts-proto | protobuf-es |
|---------|----------|-------------|
| Import path suffix | None | `_pb` |
| `isTypeOf` check | `$type` property | `instanceof` |
| Oneof access | `source.field1 ?? source.field2` | `source.oneofName.value` |
| Input conversion | Manual | `$toProto` function |
| 64-bit integers | `String` | `Int64` scalar |

## See Also

- [ts-proto Reference](./generated-code-reference-ts-proto.md) - Complete ts-proto documentation
- [protobuf-es Reference](./generated-code-reference-protobuf-es.md) - Complete protobuf-es documentation
- [Configuration](./configuration.md) - Plugin options
- [Messages](../type-mapping/messages.md) - Message to GraphQL mapping
- [Enums](../type-mapping/enums.md) - Enum conversion rules
- [Oneofs](../type-mapping/oneofs.md) - Oneof and union types
- [Scalars](../type-mapping/scalars.md) - Scalar type mappings
